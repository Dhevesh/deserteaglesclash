<!DOCTYPE html>
<html lang="en">
	<head>
		<%include partials/header%>
		<title>Clan Manager</title>
	</head>

	<body>
		<div class="">
			<div class="container">
				<div class="d-flex justify-content-around">
					<div class="d-flex flex-column">
						<span class="name clash-font"><%=clan.name%></span>
						<img src="<%=clan.badgeUrls.medium%>" alt="badge.png" class="img-xsmall" />
						<span>Clan Location: <%=clan.location.name%></span>
					</div>

					<div id="clan_info">
						<div>
							<%clan.labels.forEach((clanLabel)=>{%>
							<img src="<%=clanLabel.iconUrls.small%>" alt="<%=clanLabel.name%>" srcset="" />
							<%})%>
						</div>
						<div>Clan Access: <%=clan.type%></div>
						<div>Required Trophies: <%=clan.requiredTrophies%></div>
						<div>Required TownHall Level: <%=clan.requiredTownhallLevel%></div>
						<div>Number of Members: <%=clan.members%></div>
					</div>
					<div>
						<div class="d-flex">
							<%leagues.items.forEach((league)=>{%> <%if (league.name == clan.warLeague.name){%>
							<img src="<%=league.iconUrls.medium%>" alt="" srcset="" />
							<%}%> <%})%>

							<div class="d-flex flex-column">
								<span>War Frequency: <%=clan.warFrequency%></span>
								<span>War Wins: <%=clan.warWins%></span>
							</div>
						</div>
					</div>
					<div class="">
						<img src="/assets/images/gladiatorqueen.png" alt="gladiatorqueen.png" class="img-small" />
					</div>
				</div>
				<hr />
				<p><%=clan.description%></p>
				<p class="text-center">
					<a class="btn custom-btn clash-font" href="/members">View Members</a>
				</p>
			</div>
		</div>
		<div class="container-fluid">
			<div class="row">
				<div class="col-12 col-md-3 d-none d-md-block">
					<img src="/assets/images/gladiatorbk.png" alt="gladiatorking.png" class="img-medium img-responsive" />
				</div>
				<div class="col-md-6">
					<div id="">
						<div class="text-center mb-3">
							<span class="clash-font">Leaderboards</span>
						</div>
						
					
					<div class="home-leaderboard">
						<div class="text-center">
							<span class="clash-font">Clan Rank</span>
						</div>
						
						<div class="m-2">
							<hr class="gold-hr">	
							<div class="">
								<span>1</span>
								<span class="expLevel"><%=clan.memberList[0].expLevel%></span>
								<span class="clash-font"><%=clan.memberList[0].name%></span>
								<span><i class="fa fa-trophy"></i> <%=clan.memberList[0].trophies%></span>
							</div>
							<hr class="silver-hr">
						
						<div class="">
							<span>2</span>
							<span class="expLevel"><%=clan.memberList[1].expLevel%></span>
							<span class="clash-font"><%=clan.memberList[1].name%></span>
							<span><i class="fa fa-trophy"></i> <%=clan.memberList[1].trophies%></span>
						</div>
						<hr class="copper-hr">
						<div class="">
							<span>3</span>
							<span class="expLevel"><%=clan.memberList[2].expLevel%></span>
							<span class="clash-font"><%=clan.memberList[2].name%></span>
							<span><i class="fa fa-trophy"></i> <%=clan.memberList[2].trophies%></span>
						</div>
					</div>
					</div>
					<div class="home-leaderboard">
						<div class="text-center">
							<span class="clash-font text-center">Top Donators</span>
						</div>
						
						<%let d = [];%>
						
						<%clan.memberList.forEach((member)=>{%>
							<%# d.push({"name":member.name, "donations":member.donations})%>
							<% d.push(member)%>
							
						<%})%>
						<%d.sort((function(a,b){%>
							<%return b.donations - a.donations;%>
						<%}))%>
						<div class="m-2">
							<hr class="gold-hr">
							<div>
								<span>1</span>
								<span class="expLevel"><%=d[0].expLevel%></span>
								<span class="clash-font"><%=d[0].name%></span>
								<span><%=d[0].donations%></span>
							</div>
							<hr class="silver-hr">
							<div>
								<span>2</span>
								<span class="expLevel"><%=d[1].expLevel%></span>
								<span class="clash-font"><%=d[1].name%></span>
								<span><%=d[1].donations%></span>
							</div>
							<hr class="copper-hr">
							<div>
								<span>3</span>
								
									<span class="expLevel"><%=d[2].expLevel%></span>
								
								
								<span class="clash-font"><%=d[2].name%></span>
								<span><%=d[2].donations%></span>
							</div>
						</div>
						
					</div>
					
				</div>
					<div class="clash-font home-leaderboard" hidden>
						<% function getClanRole(role){if (role == "admin"){role = "elder";} return role;} %>
						<div class="gold-rank home-leaderboard-row">
							<span><%=clan.memberList[0].clanRank%></span>
							<span><a href=""><%=clan.memberList[0].name%></a></span>
							<span class="member-role"><%=getClanRole(clan.memberList[0].role)%></span>
						</div>
						<div class="silver-rank home-leaderboard-row">
							<span><%=clan.memberList[1].clanRank%></span>
							<span><a href=""><%=clan.memberList[1].name%></a></span>
							<span class="member-role"><%=getClanRole(clan.memberList[1].role)%></span>
						</div>
						<div class="copper-rank home-leaderboard-row">
							<span><%=clan.memberList[2].clanRank%></span>
							<span><a href=""><%=clan.memberList[2].name%></a></span>
							<span class="member-role"><%=getClanRole(clan.memberList[2].role)%></span>
						</div>
					</div>
				</div>
				<div class="col-md-3 d-none d-md-block">
					<img src="/assets/images/grandwarden.png" alt="grandwarden.png" class="img-medium" />
				</div>
			</div>
		</div>

		<%include partials/footer%>
	</body>
</html>
